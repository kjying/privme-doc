### 和用户即时聊天

##### HTTP Method: GET
##### URL: https://host/app/im/user_conn.php

#####  Parameters
名称|格式|描述|必须|默认值
---|---|---|---|---
公共参数||||

新增push消息（chat_type）：
 * 21 APP有VIP登录时，会向随机向10个在线主播发上线信息；
 * 22 APP有新入户进入时，会随机向10个在线主播发上线信息；
 * 23 平台新用户充值VIP后，会随机向30位在线主播推送信息；
 * 24 有主播登录APP后，会向平台已关注该主播的用户推送消息；
 * 25 主播设置聊天托管后，自动向新用户推送消息；
 * 26 主播设置聊天托管后，自动回复用户消息；
 * 27 主播设置聊天托管后，若接收到该类型信息，则向uid主动发送消息；
 * 28 一键打招呼；
 * 29 女版用户在开启聊天托管的情况下，上线时，会向目前平台上50名在线男性用户发送聊天托管消息（1.2版本客户端添加定时器）
 * 40 主播群发通话时，通知男性用户该主播群发的视频的请求已被人接通;
 * 41 新用户主播套路话术信息
 * 42 新用户拒接套路话术信息
 * 43 用户新关注发送信息
 * 44 用户发送行为托管消息


添加了回复托管功能 请注意：
 * 将由服务端这边主动发消息，废除get_auto_messaga.php接口。
 * uid有可能是当前的用户（即女主播），当uid是当前用户的时候，则此消息是属于托管自动回复，同时"user_info"的信息则属于receive_uid。



##### HTTP Response
```json
{
    "code": 200,
    "data": {
        "result": 1,    //1成功，2未登录，3连接超时
        "msgs": [
            {
                "uid": 10010002,   //发送消息用户的uid
                "receive_uid": 10010007,    //接收消息用户的uid
                "content": "我想认识你可以吗",  //消息内容
                "ctime": 1486453158,
                "is_hello": 1,  //0非用户给用户打招呼，1是用户给用户打招呼
                "chat_type":1,  1用户对机器人说，2客服对用户说(红娘对用户说),3机器人对用户说,4用户对用户说,5用户对红娘说,6客服对用户说,7视频语音拨号,8视频语音群拨(mongo里不记录),9视频语音挂断通知,10用户收到群通话后接听,11用户送礼
                "content_type": 1,  //1文字消息，2语音消息，3图片消息 4：视频通话请求，5：语音通话请求，6：送礼消息  7主播索礼消息
                "audio_time": 0,  //语音消息的时长，非语言消息为0
                "charge_photo": 0,  //是否为收费图片
                "is_recommend":1//群拨、单拨（特有字段） 是否为s级主播
                "user_info": {
                    "id": "10010002",
                    "nickname": "test",
                    "head_image": "",
                    "vip": "0",
                    "sex": "1",     //性别，1男，2女
                    "user_type": "0"    //用户类型，0真实用户，1机器人
                    "enable_call": 1 //1表示对方能使用视频语音通话，0表示不能
                    "video_price": 0 // 视频价格，金币
                    "audio_price": 0 // 语音价格，金币
                    "gift_count": 300 //金币
                },
                "call_data":{  //当chat_type为7、8、9、10才有call_data
                    'call_id': '' //通话id，之后要传给服务器。当chat_type=7、9或10存在
                    'video_price': '' //视频价格。当chat_type=7、8或10存在
                    'audio_price': '' //语音价格。当chat_type=7、8或10存在
                }
                "gift_data":{ //礼物数据仅在chat_type=11时才会返回
                    'call_id': 235 //通话id，仅在通话过程中的送礼才会>0，默认为0
                    'gid': 8  //礼物id
                    'name': '玫瑰花' //礼物名
                    'unit_profit': '100' //主播看到的单个礼物收益（金币，需要客户端换算成元）
                    'img': 'xxxxxx'  //礼物图片
                    'num': 3   //礼物数量
                }
                "demand_gift":{ // demand_gift仅在content_type=7时才有返回
                    "content": "主播自定义说的一句话"
                    "gid": 1 //礼物id
                    "g_num": 20 //礼物数量
                    "g_img": "xxxx"  //礼物图标
                    "g_price": 100  //礼物单价，金币
                    "g_name": "大钻石"  //礼物名称
                },
                "redpacket": 1 //为1表示产生了红包，需要显示红包图标。注意：仅当返回的content_type为1,2,3时，才显示或隐藏红包图标，如果收到其它类型消息，不做与红包相关的操作。
            },
            {
                "uid": 10010002,
                "receive_uid": 10010007,
                "content": "我想认识你可以吗",
                "ctime": 1486453158,
                "is_hello": 1,  //1是用户给用户打招呼
                "content_type": 1,  //1文字消息
                "audio_time": 0,  //语音消息的时长，非语言消息为0
                "user_info": {
                    "id": "10010002",
                    "nickname": "test",
                    "head_image": "",
                    "vip": "0",
                    "sex": "1",
                    "user_type": "0"
                }
            }

        ]
    },
    "desc": "成功"
}

```